<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Butternut r√¥ti aux √âpices par Yat√© DOUKANSY, 3PMT</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f7f7f7;
    }
    .tab-button {
      transition: all 0.2s;
      padding-top: 0.75rem;
      padding-bottom: 0.75rem;
      padding-left: 1.5rem;
      padding-right: 1.5rem;
    }
    .active-tab {
      border-bottom: 3px solid #F97316;
      font-weight: 700;
      color: #F97316;
    }
    .chart-container {
      position: relative;
      width: 100%;
      height: 150px;
    }
    .step-checkbox:checked + .step-text {
      text-decoration: line-through;
      color: #9CA3AF;
    }
    .step-text {
      transition: color 0.3s, text-decoration 0.3s;
    }
    .step-checkbox {
      transform: scale(1.2);
    }
  </style>
</head>
<body class="p-4 bg-gray-50">

  <div class="container mx-auto max-w-4xl bg-white rounded-xl shadow-2xl p-6 md:p-10 my-8">

    <p class="text-sm font-semibold text-gray-500 italic text-left mb-2">Recette de l'automne</p>

    <header class="text-center mb-10 pb-6 border-b-4 border-orange-100">
      <h1 class="text-4xl md:text-5xl font-extrabold text-orange-700 mb-3 leading-snug flex items-center justify-center flex-wrap">
        <span class="text-4xl md:text-5xl mr-2">üß°</span>
        BUTTERNUT R√îTI AUX √âPICES
        <span class="text-4xl md:text-5xl ml-2">üß°</span>
      </h1>
      <p class="text-xl md:text-2xl font-semibold text-green-600 mt-1 italic">par Yat√© DOUKANSY, 3PMT</p>
    </header>

    <!-- Section principale : description, infos, temps -->
    <section class="mb-8 flex flex-col md:flex-row gap-6">
      <div class="md:w-1/2">
        <h2 class="text-2xl font-bold text-stone-700 mb-3 flex items-center">Recette V√©g√©tale et Gourmande üçÅ</h2>
        <p class="text-gray-600 leading-relaxed">
          Une mani√®re simple et d√©licieuse de cuisiner le Butternut. La combinaison du <strong>miel (ou sirop d'√©rable)</strong> et des <strong>√©pices</strong> (cannelle, muscade) apporte une saveur sucr√©e-sal√©e parfaite pour l'automne. Id√©al en accompagnement ou en plat v√©g√©tarien l√©ger.
        </p>

        <div class="mt-4 p-3 bg-yellow-50 rounded-lg border border-yellow-200 shadow-sm">
          <h3 class="text-xl font-bold text-yellow-700 flex items-center mb-1">
            <span class="mr-2">üßë‚Äçüç≥</span> Niveau de Difficult√©
          </h3>
          <div id="difficulty-indicator" class="flex items-center gap-2 mt-2"></div>
        </div>

        <div class="mt-4 p-3 bg-green-50 rounded-lg border border-green-200 shadow-sm">
          <h3 class="text-xl font-bold text-green-700 flex items-center mb-1">
            <span class="mr-2">üí°</span> Le saviez-vous ?
            <span class="text-sm font-normal italic ml-2">(par Alice Dulos, TMA)</span>
          </h3>
          <p class="text-sm text-gray-600">
            La couleur orange vif du butternut est due √† sa richesse exceptionnelle en <b class="text-green-800">b√™ta-carot√®ne</b>. Une seule portion peut couvrir <b class="text-green-800">plus de 100%</b> de vos besoins quotidiens en <b class="text-green-800">Vitamine A</b>, essentielle pour la vision et le syst√®me immunitaire.
          </p>
        </div>

        <div class="mt-4 p-3 bg-amber-50 rounded-lg border border-amber-200 shadow-sm">
          <h3 class="text-xl font-bold text-amber-700 flex items-center mb-1">
            <span class="mr-2">‚ôªÔ∏è</span> Astuce Z√©ro Gaspi : Les Graines !
          </h3>
          <p class="text-sm text-gray-600">
            Ne jetez jamais les graines de courge ! Elles sont excellentes r√¥ties. Apr√®s les avoir bien nettoy√©es, m√©langez-les avec un peu d'huile d'olive, de sel, et une pinc√©e de paprika. Faites-les griller s√©par√©ment au four pendant <strong>10 √† 15 minutes</strong>.
          </p>
        </div>
      </div>

      <div id="recipe-times" class="md:w-1/2 p-4 bg-orange-50 rounded-xl shadow-inner border border-orange-200">
        <h3 class="text-xl font-bold text-orange-700 mb-3 text-center">‚è± Temps de la Recette</h3>

        <div class="grid grid-cols-2 md:grid-cols-3 gap-3 text-center">
          <div class="p-3 bg-white rounded-lg shadow-sm border border-orange-100">
            <p class="text-3xl text-orange-600 mb-1">‚è≥</p>
            <p class="text-xl font-bold text-orange-600" id="prep-time-display">15 min</p>
            <p class="text-xs text-gray-500">Pr√©paration</p>
          </div>
          <div class="p-3 bg-white rounded-lg shadow-sm border border-orange-100">
            <p class="text-3xl text-orange-600 mb-1">üî•</p>
            <p class="text-xl font-bold text-orange-600" id="cook-time-display">35 min</p>
            <p class="text-xs text-gray-500">Cuisson</p>
          </div>
          <div class="col-span-2 md:col-span-1 p-3 bg-orange-200 rounded-lg shadow-md border-2 border-orange-300">
            <p class="text-3xl text-orange-800 mb-1">‚è±</p>
            <p class="text-2xl font-extrabold text-orange-800" id="total-time-display">50 min</p>
            <p class="text-sm text-gray-700">Total estim√©</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Choix des portions + graphique -->
    <section class="mb-10 p-6 bg-gray-50 rounded-xl">
      <h2 class="text-2xl font-bold text-stone-700 mb-4">Portions & Visualisation</h2>

      <div class="flex flex-col md:flex-row items-center justify-between gap-6">
        <div class="md:w-1/2 w-full">
          <label for="portions" class="block text-lg font-medium text-gray-700 mb-2 flex items-center">
            <span class="text-3xl mr-2">üë•</span> Choisir le nombre de portions :
          </label>
          <input type="number" id="portions" value="4" min="1" max="12" class="w-full p-3 border border-gray-300 rounded-lg text-2xl text-center focus:ring-orange-500 focus:border-orange-500 shadow-md">
          <p class="text-sm text-gray-500 mt-2">Les quantit√©s seront automatiquement mises √† jour dans l'onglet 'Ingr√©dients'.</p>
        </div>
        <div class="md:w-1/2 w-full chart-container">
          <canvas id="timeChart"></canvas>
        </div>
      </div>
    </section>

    <!-- Onglets navigation -->
    <div class="flex justify-center gap-6 mb-6 border-b border-gray-200 pb-3">
      <button onclick="switchTab('ingredients')" id="tab-ingredients" class="tab-button text-lg text-gray-600 hover:text-orange-600">ü•ï Ingr√©dients</button>
      <button onclick="switchTab('preparation')" id="tab-preparation" class="tab-button text-lg text-gray-600 hover:text-orange-600">üë®‚Äçüç≥ Pr√©paration</button>
    </div>

    <!-- Ingr√©dients -->
    <section id="ingredients" class="tab-content">
      <ul id="ingredients-list" class="list-disc list-inside text-gray-800 space-y-2">
        <!-- Liste g√©n√©r√©e dynamiquement -->
      </ul>
    </section>

    <!-- Pr√©paration -->
    <section id="preparation" class="tab-content hidden">
      <ol id="preparation-list" class="list-decimal list-inside text-gray-800 space-y-4">
        <!-- √âtapes g√©n√©r√©es dynamiquement -->
      </ol>
    </section>
  </div>

  <!-- ‚úÖ Script JavaScript en module (n√©cessaire pour GitHub Pages) -->
  <script type="module">
    const portionsInput = document.getElementById('portions');
    const ingredientsList = document.getElementById('ingredients-list');
    const preparationList = document.getElementById('preparation-list');
    const prepTimeDisplay = document.getElementById('prep-time-display');
    const cookTimeDisplay = document.getElementById('cook-time-display');
    const totalTimeDisplay = document.getElementById('total-time-display');
    const difficultyIndicator = document.getElementById('difficulty-indicator');
    let timeChart = null;

    const ingredients = [
      { name: 'Butternut', quantity: 1, unit: 'petit' },
      { name: 'Miel ou sirop d\'√©rable', quantity: 2, unit: 'c.√†.s' },
      { name: 'Huile d\'olive', quantity: 2, unit: 'c.√†.s' },
      { name: 'Cannelle', quantity: 0.5, unit: 'c.√†.c' },
      { name: 'Muscade', quantity: 0.25, unit: 'c.√†.c' },
      { name: 'Sel', quantity: 0.5, unit: 'c.√†.c' },
      { name: 'Poivre', quantity: 0.25, unit: 'c.√†.c' },
    ];

    const steps = [
      'Pr√©chauffez votre four √† 200¬∞C (chaleur tournante).',
      'Pelez et coupez le butternut en cubes r√©guliers.',
      'Dans un grand bol, m√©langez l\'huile d\'olive, le miel, la cannelle, la muscade, le sel et le poivre.',
      'Ajoutez les cubes de butternut au m√©lange et enrobez-les bien.',
      'Disposez les cubes sur une plaque recouverte de papier cuisson.',
      'Enfournez pendant environ 35 minutes en retournant √† mi-cuisson.',
      'Servez chaud, parsem√© √©ventuellement de graines grill√©es ou d\'herbes fra√Æches.'
    ];

    const basePrepTime = 15;
    const baseCookTime = 35;

    function updateIngredients() {
      const portions = parseInt(portionsInput.value);
      ingredientsList.innerHTML = '';
      ingredients.forEach(item => {
        const li = document.createElement('li');
        const total = (item.quantity * portions / 4).toFixed(2).replace(/\.00$/, '');
        li.textContent = `${total} ${item.unit} ${item.name}`;
        ingredientsList.appendChild(li);
      });
    }

    function displayPreparation() {
      preparationList.innerHTML = '';
      steps.forEach((step, i) => {
        const li = document.createElement('li');
        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.className = 'mr-2 step-checkbox';
        const span = document.createElement('span');
        span.textContent = step;
        span.className = 'step-text';
        li.appendChild(checkbox);
        li.appendChild(span);
        preparationList.appendChild(li);
      });
    }

    function updateTimesAndChart() {
      const portions = parseInt(portionsInput.value);
      const prepTime = basePrepTime + Math.round((portions - 4) * 1);
      const cookTime = baseCookTime;
      const totalTime = prepTime + cookTime;

      prepTimeDisplay.textContent = `${prepTime} min`;
      cookTimeDisplay.textContent = `${cookTime} min`;
      totalTimeDisplay.textContent = `${totalTime} min`;

      if (timeChart) {
        timeChart.destroy();
      }

      const ctx = document.getElementById('timeChart');
      timeChart = new Chart(ctx, {
        type: 'doughnut',
        data: {
          labels: ['Pr√©paration', 'Cuisson'],
          datasets: [{
            data: [prepTime, cookTime],
            backgroundColor: ['#fb923c', '#f97316'],
            borderWidth: 2,
            borderColor: '#fff'
          }]
        },
        options: {
          plugins: {
            legend: {
              display: true,
              position: 'bottom'
            }
          }
        }
      });
    }

    function displayDifficulty() {
      const icons = 'üî•'.repeat(2);
      difficultyIndicator.innerHTML = `<span class="text-2xl">${icons}</span><span class="text-gray-600 ml-2">(facile)</span>`;
    }

    function switchTab(tab) {
      document.getElementById('ingredients').classList.add('hidden');
      document.getElementById('preparation').classList.add('hidden');
      document.getElementById(`tab-ingredients`).classList.remove('active-tab');
      document.getElementById(`tab-preparation`).classList.remove('active-tab');

      document.getElementById(tab).classList.remove('hidden');
      document.getElementById(`tab-${tab}`).classList.add('active-tab');
    }

    portionsInput.addEventListener('input', () => {
      updateIngredients();
      updateTimesAndChart();
    });

    document.addEventListener('DOMContentLoaded', () => {
      displayDifficulty();
      updateTimesAndChart();
      displayPreparation();
      updateIngredients();
      switchTab('preparation');
    });
  </script>
</body>
</html>
