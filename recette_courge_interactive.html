<body class="p-4 bg-gray-50">

    <div class="container mx-auto max-w-4xl bg-white rounded-xl shadow-2xl p-6 md:p-10 my-8">
        
        <div class="mb-6 text-center">
            <a href="index.html" class="inline-flex items-center text-lg font-semibold text-gray-700 hover:text-orange-600 transition duration-150 ease-in-out p-2 rounded-lg hover:bg-orange-50">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 17l-5-5m0 0l5-5m-5 5h12"></path></svg>
                Retour aux recettes
            </a>
        </div>
        <header class="text-center mb-10 pb-6 border-b-4 border-orange-100">
            <h1 class="text-4xl md:text-5xl font-extrabold text-orange-700 mb-3 leading-snug">
                <span class="text-5xl md:text-6xl mr-2">ğŸƒ</span>
                COURGE LITTLE JACK FARCIE AU RISOTTO
                <span class="text-5xl md:text-6xl ml-2">ğŸƒ</span>
            </h1>
            <div class="text-center">
                <p class="text-xl md:text-2xl font-semibold text-green-600 mt-1 italic">par Reda Chibah, 3PMT</p>
            </div>
        </header>

        ```

### Le code HTML complet et mis Ã  jour :

```html
<!DOCTYPE html>
<html lang="fr">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>Courge Little Jack farcie au risotto par Reda, 3PMT</title>
Â  Â Â 
Â  Â  Â  Â  <script src="https://cdn.tailwindcss.com"></script>
Â  Â Â 
Â  Â  Â  Â  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
Â  Â Â 
Â  Â  <link rel="preconnect" href="https://fonts.googleapis.com">
Â  Â  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
Â  Â  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800&display=swap" rel="stylesheet">
Â  Â  <style>
Â  Â  Â  Â  /* Styles personnalisÃ©s pour amÃ©liorer les transitions et le rendu */
Â  Â  Â  Â  body { font-family: 'Inter', sans-serif; background-color: #f7f7f7; }
Â  Â  Â  Â  .tab-button {Â 
Â  Â  Â  Â  Â  Â  transition: all 0.2s;Â 
Â  Â  Â  Â  Â  Â  padding-top: 0.75rem; /* py-3 */
Â  Â  Â  Â  Â  Â  padding-bottom: 0.75rem; /* py-3 */
Â  Â  Â  Â  Â  Â  padding-left: 1.5rem; /* px-6 */
Â  Â  Â  Â  Â  Â  padding-right: 1.5rem; /* px-6 */
Â  Â  Â  Â  }
Â  Â  Â  Â  .active-tab {Â 
Â  Â  Â  Â  Â  Â  border-bottom: 3px solid #F97316;Â 
Â  Â  Â  Â  Â  Â  font-weight: 700;Â 
Â  Â  Â  Â  Â  Â  color: #F97316;Â 
Â  Â  Â  Â  }
Â  Â  Â  Â  /* Conteneur pour le graphique Doughnut */
Â  Â  Â  Â  .chart-container {Â 
Â  Â  Â  Â  Â  Â  position: relative;Â 
Â  Â  Â  Â  Â  Â  width: 100%;Â 
Â  Â  Â  Â  Â  Â  height: 150px; /* Hauteur fixe pour le graphique */
Â  Â  Â  Â  }
Â  Â  Â  Â  .step-checkbox:checked + .step-text {Â 
Â  Â  Â  Â  Â  Â  text-decoration: line-through;Â 
Â  Â  Â  Â  Â  Â  color: #9CA3AF;Â 
Â  Â  Â  Â  }
Â  Â  Â  Â  .step-text { transition: color 0.3s, text-decoration 0.3s; }
Â  Â  Â  Â  .step-checkbox { transform: scale(1.2); }

Â  Â  Â  Â  /* Styles Responsifs pour les cartes de temps sur mobile */
Â  Â  Â  Â  @media (max-width: 767px) {
Â  Â  Â  Â  Â  Â  .time-card-grid {
Â  Â  Â  Â  Â  Â  Â  Â  grid-template-columns: 1fr 1fr; /* 2 colonnes sur mobile */
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  .time-card-grid > div:last-child {
Â  Â  Â  Â  Â  Â  Â  Â  grid-column: span 2; /* Total time prend toute la largeur */
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body class="p-4 bg-gray-50">

Â  Â  <div class="container mx-auto max-w-4xl bg-white rounded-xl shadow-2xl p-6 md:p-10 my-8">
Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  <div class="mb-6 text-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <a href="index.html" class="inline-flex items-center text-lg font-semibold text-gray-700 hover:text-orange-600 transition duration-150 ease-in-out p-2 rounded-lg hover:bg-orange-50">
Â  Â  Â  Â  Â  Â  Â  Â  <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 17l-5-5m0 0l5-5m-5 5h12"></path></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Retour aux recettes
Â  Â  Â  Â  Â  Â  </a>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <header class="text-center mb-10 pb-6 border-b-4 border-orange-100">
Â  Â  Â  Â  Â  Â  <h1 class="text-4xl md:text-5xl font-extrabold text-orange-700 mb-3 leading-snug">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-5xl md:text-6xl mr-2">ğŸƒ</span>
Â  Â  Â  Â  Â  Â  Â  Â  COURGE LITTLE JACK FARCIE AU RISOTTO
Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-5xl md:text-6xl ml-2">ğŸƒ</span>
Â  Â  Â  Â  Â  Â  </h1>
Â  Â  Â  Â  Â  Â  <div class="text-center">
Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-xl md:text-2xl font-semibold text-green-600 mt-1 italic">par Reda Chibah, 3PMT</p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </header>

Â  Â  Â  Â  Â  Â  Â  Â  <section class="mb-8 flex flex-col md:flex-row gap-6">
Â  Â  Â  Â  Â  Â  <div class="md:w-1/2">
Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="text-2xl font-bold text-stone-700 mb-3 flex items-center">Recette d'Automne ğŸ‚</h2>
Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-gray-600 leading-relaxed">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Cette recette met en valeur la courge Little Jack, une petite citrouille parfaite pour une portion individuelle. Le risotto est crÃ©meux grÃ¢ce au **Camembert** et Ã  l'**huile d'olive**, offrant une alternative gourmande au beurre et au parmesan.
Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mt-4 p-3 bg-yellow-50 rounded-lg border border-yellow-200 shadow-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="text-xl font-bold text-yellow-700 flex items-center mb-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="mr-2">ğŸ§‘â€ğŸ³</span> Niveau de DifficultÃ©
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="difficulty-indicator" class="flex items-center gap-2 mt-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="recipe-times" class="md:w-1/2 p-4 bg-orange-50 rounded-lg shadow-inner border border-orange-200">
Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="text-xl font-bold text-orange-700 mb-3 text-center">â± Temps Total</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid time-card-grid grid-cols-3 gap-3 text-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-3xl text-orange-600 mb-1">â³</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-2xl font-bold text-orange-600" id="prep-time-display">25 min</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm text-gray-500">PrÃ©paration</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-3xl text-orange-600 mb-1">ğŸ”¥</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-2xl font-bold text-orange-600" id="cook-time-display">35 min</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm text-gray-500">Cuisson</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="col-span-full md:col-span-1 border-t md:border-t-0 md:border-l border-orange-200 pt-3 md:pt-0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-3xl text-orange-700 mb-1">â±</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-2xl font-bold text-orange-700" id="total-time-display">60 min</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm text-gray-500">Total</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </section>

Â  Â  Â  Â  Â  Â  Â  Â  <section class="mb-10 p-6 bg-gray-50 rounded-xl">
Â  Â  Â  Â  Â  Â  <h2 class="text-2xl font-bold text-stone-700 mb-4">Portions & Visualisation</h2>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div class="flex flex-col md:flex-row items-center justify-between gap-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="md:w-1/2 w-full">Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="portions" class="block text-lg font-medium text-gray-700 mb-2 flex items-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-3xl mr-2">ğŸ‘¥</span> Choisir le nombre de portions :
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" id="portions" value="4" min="1" max="12" class="w-full p-3 border border-gray-300 rounded-lg text-2xl text-center focus:ring-orange-500 focus:border-orange-500 shadow-md">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm text-gray-500 mt-2">Les quantitÃ©s seront automatiquement mises Ã  jour dans l'onglet 'IngrÃ©dients'.</p>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="md:w-1/2 w-full chart-container">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <canvas id="timeChart"></canvas>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </section>

Â  Â  Â  Â  Â  Â  Â  Â  <section>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex border-b border-gray-200 mb-6">
Â  Â  Â  Â  Â  Â  Â  Â  <button id="tab-ingredients" class="tab-button text-lg text-gray-500">IngrÃ©dients</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button id="tab-preparation" class="tab-button text-lg text-gray-500 active-tab">PrÃ©paration</button>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="content-ingredients" class="tab-content hidden">
Â  Â  Â  Â  Â  Â  Â  Â  <ul id="ingredients-list" class="space-y-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </ul>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="content-preparation" class="tab-content">
Â  Â  Â  Â  Â  Â  Â  Â  <ol id="preparation-list" class="space-y-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </ol>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </section>

Â  Â  </div>

Â  Â  Â  Â  <script>
Â  Â  Â  Â  const portionsInput = document.getElementById('portions');
Â  Â  Â  Â  const ingredientsList = document.getElementById('ingredients-list');
Â  Â  Â  Â  const preparationList = document.getElementById('preparation-list');
Â  Â  Â  Â  const prepTimeDisplay = document.getElementById('prep-time-display');
Â  Â  Â  Â  const cookTimeDisplay = document.getElementById('cook-time-display');
Â  Â  Â  Â  const totalTimeDisplay = document.getElementById('total-time-display');

Â  Â  Â  Â  let timeChart = null; // DÃ‰COMMENTÃ‰

Â  Â  Â  Â  // --- DONNÃ‰ES DE LA RECETTE ---
Â  Â  Â  Â  const BASE_PORTIONS = 4;
Â  Â  Â  Â  const BASE_PREP_TIME = 25; // min
Â  Â  Â  Â  const BASE_COOK_TIME = 35; // min (Cuisson au four qui ne dÃ©pend pas de la portion)
Â  Â  Â  Â  const DIFFICULTY_LEVEL = 2; // Niveau 2 sur 5

Â  Â  Â  Â  const recipeData = {
Â  Â  Â  Â  Â  Â  ingredients: [
Â  Â  Â  Â  Â  Â  Â  Â  { category: "LÃ©gumes et Fruits", name: "Courges Little Jack (environ 350g ch.)", baseAmount: 4, unit: "unitÃ©s" },
Â  Â  Â  Â  Â  Â  Â  Â  { category: "LÃ©gumes et Fruits", name: "Oignon jaune hachÃ© finement (ou Ã©chalote pour les petites portions)", baseAmount: 1, unit: "petit" },
Â  Â  Â  Â  Â  Â  Â  Â  { category: "LÃ©gumes et Fruits", name: "Gousses d'ail hachÃ©es", baseAmount: 2, unit: "unitÃ©s" },
Â  Â  Â  Â  Â  Â  Â  Â  { category: "Riz", name: "Riz Arborio ou Carnaroli", baseAmount: 300, unit: "g" },
Â  Â  Â  Â  Â  Â  Â  Â  { category: "Liquides", name: "Bouillon de lÃ©gumes chaud", baseAmount: 1.2, unit: "L" },
Â  Â  Â  Â  Â  Â  Â  Â  { category: "Gras et Fromage", name: "Huile d'olive (pour cuisson et crÃ©mage)", baseAmount: 3, unit: "cs" },
Â  Â  Â  Â  Â  Â  Â  Â  { category: "Gras et Fromage", name: "Camembert coupÃ© en morceaux", baseAmount: 125, unit: "g" },
Â  Â  Â  Â  Â  Â  Â  Â  { category: "Assaisonnement", name: "Vinaigre de cidre ou jus de citron (pour dÃ©glaÃ§age)", baseAmount: 15, unit: "ml" },
Â  Â  Â  Â  Â  Â  Â  Â  { category: "Assaisonnement", name: "Noix de muscade fraÃ®chement rÃ¢pÃ©e", baseAmount: 0.5, unit: "cc" },
Â  Â  Â  Â  Â  Â  Â  Â  { category: "Assaisonnement", name: "Sel et poivre noir", baseAmount: 1, unit: "selon goÃ»t" }
Â  Â  Â  Â  Â  Â  ],
Â  Â  Â  Â  Â  Â  preparation: [
Â  Â  Â  Â  Â  Â  Â  Â  { step: 1, category: "Courge", text: "<b>PrÃ©parer les courges :</b> PrÃ©chauffez le four Ã  180Â°C. Coupez le chapeau de chaque courge Little Jack. Ã‰videz-les de leurs graines. Salez et poivrez l'intÃ©rieur. Enfournez les courges (avec les chapeaux Ã  cÃ´tÃ©) pendant 30 minutes. Elles doivent Ãªtre tendres mais tenir leur forme." },
Â  Â  Â  Â  Â  Â  Â  Â  { step: 2, category: "Risotto", text: "<b>Sauter l'oignon :</b> Dans une casserole, ajoutez 1 cs d'huile d'olive. Ajoutez l'oignon hachÃ© et faites-le suer 5 Ã  7 minutes. Ajoutez l'ail. Ajoutez le riz et faites-le nacrer pendant 1 minute jusqu'Ã  ce qu'il devienne translucide sur les bords." },
Â  Â  Â  Â  Â  Â  Â  Â  { step: 3, category: "Risotto", text: "<b>Cuisson :</b> <em>(Alternative au vin)</em> Ajoutez le vinaigre de cidre ou le jus de citron au riz et laissez s'Ã©vaporer. Ajoutez ensuite une louche de bouillon chaud. Remuez jusqu'Ã  absorption. Continuez d'ajouter le bouillon louche aprÃ¨s louche pendant environ 15 Ã  18 minutes, jusqu'Ã  ce que le riz soit 'al dente'." },
Â  Â  Â  Â  Â  Â  Â  Â  { step: 4, category: "Finition", text: "<b>CrÃ©mer et Farcissage :</b> Hors du feu, ajoutez 1 cs d'huile d'olive et le Camembert coupÃ© en morceaux. MÃ©langez vigoureusement jusqu'Ã  obtenir un risotto crÃ©meux. Ajoutez la noix de muscade, sel et poivre. Farcissez gÃ©nÃ©reusement chaque courge avec le risotto. Replacez le chapeau sur la courge et servez immÃ©diatement." }
Â  Â  Â  Â  Â  Â  ]
Â  Â  Â  Â  };

Â  Â  Â  Â  /**
Â  Â  Â  Â  Â * Formate la quantitÃ© pour un affichage lisible (gÃ¨re les unitÃ©s et l'arrondi).
Â  Â  Â  Â  Â * @param {number} amount - La quantitÃ© calculÃ©e.
Â  Â  Â  Â  Â * @param {string} unit - L'unitÃ© (g, L, unitÃ©s, cs, etc.).
Â  Â  Â  Â  Â * @returns {string} La chaÃ®ne formatÃ©e.
Â  Â  Â  Â  Â */
Â  Â  Â  Â  function formatAmount(amount, unit) {
Â  Â  Â  Â  Â  Â  if (unit === "selon goÃ»t") return unit;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Si c'est une unitÃ©, on garde la quantitÃ© telle quelle (ex: 4 unitÃ©s)
Â  Â  Â  Â  Â  Â  if (unit === "unitÃ©s" || unit === "petit" || unit === "grand") {
Â  Â  Â  Â  Â  Â  Â  Â  // On peut avoir 1.5 oignons pour 6 portions, on affiche 1.5
Â  Â  Â  Â  Â  Â  Â  Â  return amount.toFixed(1).replace(/\.0$/, '') + ' ' + unit;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // Gestion de l'arrondi pour les autres mesures (masse/volume)
Â  Â  Â  Â  Â  Â  // On veut un chiffre aprÃ¨s la virgule seulement s'il est pertinent
Â  Â  Â  Â  Â  Â  return amount.toFixed(2).replace(/\.00$|\.0$/, '') + ' ' + unit;
Â  Â  Â  Â  }

Â  Â  Â  Â  /**
Â  Â  Â  Â  Â * Met Ã  jour la liste des ingrÃ©dients en fonction du facteur de portion.
Â  Â  Â  Â  Â * @param {number} factor - Facteur multiplicateur (nouvellePortion / BASE_PORTIONS).
Â  Â  Â  Â  Â */
Â  Â  Â  Â  function renderIngredients(factor) {
Â  Â  Â  Â  Â  Â  ingredientsList.innerHTML = '';
Â  Â  Â  Â  Â  Â  let currentCategory = "";

Â  Â  Â  Â  Â  Â  recipeData.ingredients.forEach(item => {
Â  Â  Â  Â  Â  Â  Â  Â  // CrÃ©er un nouveau titre de catÃ©gorie si on change de catÃ©gorie
Â  Â  Â  Â  Â  Â  Â  Â  if (item.category !== currentCategory) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  currentCategory = item.category;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const header = document.createElement('h3');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  header.className = 'text-lg font-bold text-stone-700 mt-6 mb-2 border-b border-orange-200 pb-1';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  header.textContent = item.category;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ingredientsList.appendChild(header);
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  const scaledAmount = item.baseAmount * factor;

Â  Â  Â  Â  Â  Â  Â  Â  const listItem = document.createElement('li');
Â  Â  Â  Â  Â  Â  Â  Â  listItem.className = 'flex justify-between items-center p-3 bg-white rounded-lg border border-gray-100 shadow-sm transition-shadow hover:shadow-md';
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  const amountText = formatAmount(scaledAmount, item.unit);

Â  Â  Â  Â  Â  Â  Â  Â  listItem.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-gray-700">${item.name}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-semibold text-orange-600">${amountText}</span>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  Â  Â  ingredientsList.appendChild(listItem);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  /**
Â  Â  Â  Â  Â * Rend la liste des Ã©tapes de prÃ©paration avec des cases Ã  cocher.
Â  Â  Â  Â  Â */
Â  Â  Â  Â  function renderPreparation() {
Â  Â  Â  Â  Â  Â  preparationList.innerHTML = '';
Â  Â  Â  Â  Â  Â  recipeData.preparation.forEach(item => {
Â  Â  Â  Â  Â  Â  Â  Â  const listItem = document.createElement('li');
Â  Â  Â  Â  Â  Â  Â  Â  listItem.className = 'flex items-start p-4 bg-white rounded-xl shadow-md border border-gray-100';
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  listItem.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="checkbox" class="step-checkbox mt-1.5 mr-4 accent-orange-500 min-w-4 min-h-4 cursor-pointer">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="step-text flex-grow">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-bold text-orange-600 mr-2">${item.step}.</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-gray-700">${item.text}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  Â  Â  preparationList.appendChild(listItem);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  /**
Â  Â  Â  Â  Â * Met Ã  jour les temps de prÃ©paration et le temps total (la cuisson est fixe).
Â  Â  Â  Â  Â */
Â  Â  Â  Â  function updateTimes() {
Â  Â  Â  Â  Â  Â  const newPortions = parseInt(portionsInput.value, 10);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Formule : Le temps de prÃ©paration augmente lÃ©gÃ¨rement avec les portions (exposant 0.1)
Â  Â  Â  Â  Â  Â  const newPrepTime = Math.round(BASE_PREP_TIME * Math.pow(newPortions / BASE_PORTIONS, 0.1));Â 
Â  Â  Â  Â  Â  Â  const newCookTime = BASE_COOK_TIME;Â 
Â  Â  Â  Â  Â  Â  const newTotalTime = newPrepTime + newCookTime;

Â  Â  Â  Â  Â  Â  prepTimeDisplay.textContent = `${newPrepTime} min`;
Â  Â  Â  Â  Â  Â  cookTimeDisplay.textContent = `${newCookTime} min`;
Â  Â  Â  Â  Â  Â  totalTimeDisplay.textContent = `${newTotalTime} min`;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  updateTimeChart(newPrepTime, newCookTime); // Appel Ã  la mise Ã  jour du graphique
Â  Â  Â  Â  }

Â  Â  Â  Â  /**
Â  Â  Â  Â  Â * Affiche l'indicateur de difficultÃ©.
Â  Â  Â  Â  Â */
Â  Â  Â  Â  function renderDifficulty() {
Â  Â  Â  Â  Â  Â  const indicator = document.getElementById('difficulty-indicator');
Â  Â  Â  Â  Â  Â  const maxLevel = 5;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  indicator.innerHTML = '';
Â  Â  Â  Â  Â  Â  for (let i = 1; i <= maxLevel; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  const icon = document.createElement('span');
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  const isFilled = i <= DIFFICULTY_LEVEL;
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  icon.className = `h-4 w-4 rounded-full transition-all duration-300 block`;Â 

Â  Â  Â  Â  Â  Â  Â  Â  if (isFilled) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Cercle plein
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  icon.classList.add('bg-orange-500', 'shadow-md');
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Cercle vide (bordure)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  icon.classList.add('border-2', 'border-orange-500');
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  indicator.appendChild(icon);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  /**
Â  Â  Â  Â  Â * CrÃ©e le graphique Chart.js (Donut).
Â  Â  Â  Â  Â */
Â  Â  Â  Â  function renderTimeChart() {
Â  Â  Â  Â  Â  Â  // S'assurer que Chart est disponible avant de l'utiliser
Â  Â  Â  Â  Â  Â  if (typeof Chart === 'undefined') {
Â  Â  Â  Â  Â  Â  Â  Â  console.warn("Chart.js n'est pas chargÃ©. Le graphique ne sera pas affichÃ©.");
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const prepTime = parseInt(prepTimeDisplay.textContent);
Â  Â  Â  Â  Â  Â  const cookTime = parseInt(cookTimeDisplay.textContent);
Â  Â  Â  Â  Â  Â  const ctx = document.getElementById('timeChart').getContext('2d');

Â  Â  Â  Â  Â  Â  // DÃ©truire l'ancienne instance si elle existe
Â  Â  Â  Â  Â  Â  if (timeChart) {
Â  Â  Â  Â  Â  Â  Â  Â  timeChart.destroy();
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  timeChart = new Chart(ctx, {
Â  Â  Â  Â  Â  Â  Â  Â  type: 'doughnut',
Â  Â  Â  Â  Â  Â  Â  Â  data: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  labels: ['PrÃ©paration', 'Cuisson'],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  datasets: [{
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  data: [prepTime, cookTime],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  backgroundColor: [
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '#FDBA74', // Orange-300 (Clair)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '#EA580C', // Orange-600 (FoncÃ©)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  hoverBackgroundColor: [
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '#F97316', // Orange-500
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '#C2410C', // Orange-700
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  borderColor: '#ffffff',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  borderWidth: 2,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }]
Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  options: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  responsive: true,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  maintainAspectRatio: false,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cutout: '70%', // Taille du trou pour le donut
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  plugins: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  legend: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  position: 'bottom',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  labels: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  padding: 10,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  font: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  size: 12,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  family: 'Inter'
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tooltip: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  callbacks: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  label: function(context) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let label = context.label || '';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (label) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  label += ': ';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  label += context.parsed + ' min';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return label;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  /**
Â  Â  Â  Â  Â * Met Ã  jour les donnÃ©es du graphique existant.
Â  Â  Â  Â  Â * @param {number} prepTime - Nouveau temps de prÃ©paration.
Â  Â  Â  Â  Â * @param {number} cookTime - Nouveau temps de cuisson (fixe).
Â  Â  Â  Â  Â */
Â  Â  Â  Â  function updateTimeChart(prepTime, cookTime) {
Â  Â  Â  Â  Â  Â  if (timeChart) {
Â  Â  Â  Â  Â  Â  Â  Â  timeChart.data.datasets[0].data = [prepTime, cookTime];
Â  Â  Â  Â  Â  Â  Â  Â  timeChart.update();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }


Â  Â  Â  Â  // --- GESTION DES Ã‰VÃ‰NEMENTS ---

Â  Â  Â  Â  /**
Â  Â  Â  Â  Â * GÃ¨re le changement du nombre de portions.
Â  Â  Â  Â  Â */
Â  Â  Â  Â  function handlePortionChange() {
Â  Â  Â  Â  Â  Â  const newPortions = parseInt(portionsInput.value, 10);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (newPortions > 0 && newPortions <= 12) {
Â  Â  Â  Â  Â  Â  Â  Â  const factor = newPortions / BASE_PORTIONS;
Â  Â  Â  Â  Â  Â  Â  Â  renderIngredients(factor);
Â  Â  Â  Â  Â  Â  Â  Â  updateTimes(); // Appelle aussi updateTimeChart
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  // EmpÃªche les valeurs invalides (ou vide)
Â  Â  Â  Â  Â  Â  Â  Â  portionsInput.value = BASE_PORTIONS;
Â  Â  Â  Â  Â  Â  Â  Â  renderIngredients(1);
Â  Â  Â  Â  Â  Â  Â  Â  updateTimes();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  /**
Â  Â  Â  Â  Â * GÃ¨re le clic sur les boutons d'onglet.
Â  Â  Â  Â  Â */
Â  Â  Â  Â  function handleTabClick(event) {
Â  Â  Â  Â  Â  Â  // DÃ©sactiver tous les onglets et cacher tous les contenus
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.tab-button').forEach(tab => tab.classList.remove('active-tab'));
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.tab-content').forEach(content => content.classList.add('hidden'));

Â  Â  Â  Â  Â  Â  // Activer l'onglet cliquÃ© et afficher le contenu correspondant
Â  Â  Â  Â  Â  Â  event.target.classList.add('active-tab');
Â  Â  Â  Â  Â  Â  const targetId = event.target.id.replace('tab-', 'content-');
Â  Â  Â  Â  Â  Â  document.getElementById(targetId).classList.remove('hidden');
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- INITIALISATION AU CHARGEMENT DE LA PAGE ---

Â  Â  Â  Â  document.addEventListener('DOMContentLoaded', () => {
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Initialisation des Ã©lÃ©ments de la page
Â  Â  Â  Â  Â  Â  renderDifficulty();Â 
Â  Â  Â  Â  Â  Â  renderIngredients(1);Â 
Â  Â  Â  Â  Â  Â  renderPreparation();
Â  Â  Â  Â  Â  Â  updateTimes(); // Met Ã  jour les temps et appelle updateTimeChart()
Â  Â  Â  Â  Â  Â  renderTimeChart(); // CrÃ©e le graphique initial

Â  Â  Â  Â  Â  Â  // Ajout des Ã©couteurs
Â  Â  Â  Â  Â  Â  portionsInput.addEventListener('input', handlePortionChange);
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.tab-button').forEach(button => {
Â  Â  Â  Â  Â  Â  Â  Â  button.addEventListener('click', handleTabClick);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  });
Â  Â  </script>
</body>
</html>
